{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/abhijeetmishra/Developer/Projects/Salesapp/web-app/app/api/mock/payment/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport async function POST(request: Request) {\n  const body = await request.json()\n  const {\n    amount,\n    paymentMethod,\n    customerId,\n    mode = \"success\", // success, declined, network-error, delayed\n    useGiftCard = false,\n    useLoyaltyPoints = false,\n    giftCardAmount = 0,\n    loyaltyPointsUsed = 0,\n  } = body\n\n  // Simulate processing time\n  const delay = mode === \"delayed\" ? 3000 : 800\n  await new Promise((resolve) => setTimeout(resolve, delay))\n\n  if (mode === \"network-error\") {\n    return NextResponse.json(\n      { success: false, error: \"Network timeout. Please try again.\", code: \"NETWORK_ERROR\" },\n      { status: 503 },\n    )\n  }\n\n  if (mode === \"declined\") {\n    return NextResponse.json({\n      success: false,\n      error: \"Payment declined. Please check your card details or try another payment method.\",\n      code: \"CARD_DECLINED\",\n      data: {\n        transactionId: `TXN-${Date.now()}`,\n        status: \"declined\",\n        suggestedActions: [\"retry\", \"change-payment\", \"use-gift-card\"],\n      },\n    })\n  }\n\n  // Calculate final amount after gift card and loyalty points\n  let finalAmount = amount\n  let appliedGiftCard = 0\n  let appliedPoints = 0\n  let pointsValue = 0\n\n  if (useGiftCard && giftCardAmount > 0) {\n    appliedGiftCard = Math.min(giftCardAmount, finalAmount)\n    finalAmount -= appliedGiftCard\n  }\n\n  if (useLoyaltyPoints && loyaltyPointsUsed > 0) {\n    pointsValue = loyaltyPointsUsed * 0.01 // 1 point = $0.01\n    appliedPoints = Math.min(pointsValue, finalAmount)\n    finalAmount -= appliedPoints\n  }\n\n  return NextResponse.json({\n    success: true,\n    data: {\n      transactionId: `TXN-${Date.now()}`,\n      status: \"approved\",\n      originalAmount: amount,\n      giftCardApplied: appliedGiftCard,\n      loyaltyPointsApplied: appliedPoints,\n      loyaltyPointsUsed: Math.floor(appliedPoints / 0.01),\n      finalAmount,\n      paymentMethod,\n      customerId,\n      timestamp: new Date().toISOString(),\n      earnedPoints: Math.floor(finalAmount * 10), // 10 points per dollar\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,EACJ,MAAM,EACN,aAAa,EACb,UAAU,EACV,OAAO,SAAS,EAChB,cAAc,KAAK,EACnB,mBAAmB,KAAK,EACxB,iBAAiB,CAAC,EAClB,oBAAoB,CAAC,EACtB,GAAG;IAEJ,2BAA2B;IAC3B,MAAM,QAAQ,SAAS,YAAY,OAAO;IAC1C,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,IAAI,SAAS,iBAAiB;QAC5B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;YAAsC,MAAM;QAAgB,GACrF;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI,SAAS,YAAY;QACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;YACP,MAAM;YACN,MAAM;gBACJ,eAAe,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;gBAClC,QAAQ;gBACR,kBAAkB;oBAAC;oBAAS;oBAAkB;iBAAgB;YAChE;QACF;IACF;IAEA,4DAA4D;IAC5D,IAAI,cAAc;IAClB,IAAI,kBAAkB;IACtB,IAAI,gBAAgB;IACpB,IAAI,cAAc;IAElB,IAAI,eAAe,iBAAiB,GAAG;QACrC,kBAAkB,KAAK,GAAG,CAAC,gBAAgB;QAC3C,eAAe;IACjB;IAEA,IAAI,oBAAoB,oBAAoB,GAAG;QAC7C,cAAc,oBAAoB,MAAK,kBAAkB;QACzD,gBAAgB,KAAK,GAAG,CAAC,aAAa;QACtC,eAAe;IACjB;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT,MAAM;YACJ,eAAe,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;YAClC,QAAQ;YACR,gBAAgB;YAChB,iBAAiB;YACjB,sBAAsB;YACtB,mBAAmB,KAAK,KAAK,CAAC,gBAAgB;YAC9C;YACA;YACA;YACA,WAAW,IAAI,OAAO,WAAW;YACjC,cAAc,KAAK,KAAK,CAAC,cAAc;QACzC;IACF;AACF"}}]
}