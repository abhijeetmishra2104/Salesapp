{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/mock/customers.json"],"sourcesContent":["[{\"id\":\"cust_01\",\"name\":\"Sarah Johnson\",\"email\":\"sarah.j@email.com\",\"loyaltyTier\":\"platinum\",\"loyaltyPoints\":12500,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-001\",\"date\":\"2024-11-15\",\"total\":289.99,\"items\":[\"SKU-HEEL-001\",\"SKU-BAG-003\"]},{\"orderId\":\"ORD-2024-002\",\"date\":\"2024-10-28\",\"total\":159.99,\"items\":[\"SKU-FLAT-002\"]}],\"devicePref\":\"mobile\",\"savedCards\":[{\"last4\":\"4242\",\"brand\":\"Visa\",\"expiry\":\"12/26\"}],\"giftCardBalance\":75.0},{\"id\":\"cust_02\",\"name\":\"Michael Chen\",\"email\":\"m.chen@email.com\",\"loyaltyTier\":\"gold\",\"loyaltyPoints\":5200,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-003\",\"date\":\"2024-11-01\",\"total\":450.0,\"items\":[\"SKU-BOOT-001\",\"SKU-SNEAK-002\"]}],\"devicePref\":\"desktop\",\"savedCards\":[{\"last4\":\"1234\",\"brand\":\"Mastercard\",\"expiry\":\"08/25\"}],\"giftCardBalance\":0},{\"id\":\"cust_03\",\"name\":\"Emma Williams\",\"email\":\"emma.w@email.com\",\"loyaltyTier\":\"silver\",\"loyaltyPoints\":2100,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-004\",\"date\":\"2024-09-20\",\"total\":89.99,\"items\":[\"SKU-SAND-001\"]}],\"devicePref\":\"mobile\",\"savedCards\":[{\"last4\":\"5678\",\"brand\":\"Visa\",\"expiry\":\"03/27\"}],\"giftCardBalance\":50.0},{\"id\":\"cust_04\",\"name\":\"James Rodriguez\",\"email\":\"j.rodriguez@email.com\",\"loyaltyTier\":\"bronze\",\"loyaltyPoints\":800,\"purchaseHistory\":[],\"devicePref\":\"mobile\",\"savedCards\":[],\"giftCardBalance\":25.0},{\"id\":\"cust_05\",\"name\":\"Olivia Brown\",\"email\":\"olivia.b@email.com\",\"loyaltyTier\":\"platinum\",\"loyaltyPoints\":18900,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-005\",\"date\":\"2024-11-10\",\"total\":599.99,\"items\":[\"SKU-HEEL-003\",\"SKU-HEEL-004\",\"SKU-BAG-001\"]},{\"orderId\":\"ORD-2024-006\",\"date\":\"2024-10-15\",\"total\":349.99,\"items\":[\"SKU-BOOT-002\"]}],\"devicePref\":\"desktop\",\"savedCards\":[{\"last4\":\"9012\",\"brand\":\"Amex\",\"expiry\":\"11/26\"}],\"giftCardBalance\":150.0},{\"id\":\"cust_06\",\"name\":\"William Taylor\",\"email\":\"w.taylor@email.com\",\"loyaltyTier\":\"gold\",\"loyaltyPoints\":6800,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-007\",\"date\":\"2024-11-05\",\"total\":199.99,\"items\":[\"SKU-SNEAK-001\"]}],\"devicePref\":\"mobile\",\"savedCards\":[{\"last4\":\"3456\",\"brand\":\"Visa\",\"expiry\":\"05/25\"}],\"giftCardBalance\":0},{\"id\":\"cust_07\",\"name\":\"Sophia Martinez\",\"email\":\"sophia.m@email.com\",\"loyaltyTier\":\"silver\",\"loyaltyPoints\":3400,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-008\",\"date\":\"2024-10-20\",\"total\":129.99,\"items\":[\"SKU-FLAT-001\"]}],\"devicePref\":\"kiosk\",\"savedCards\":[{\"last4\":\"7890\",\"brand\":\"Mastercard\",\"expiry\":\"09/26\"}],\"giftCardBalance\":30.0},{\"id\":\"cust_08\",\"name\":\"Benjamin Lee\",\"email\":\"ben.lee@email.com\",\"loyaltyTier\":\"bronze\",\"loyaltyPoints\":450,\"purchaseHistory\":[],\"devicePref\":\"desktop\",\"savedCards\":[],\"giftCardBalance\":0},{\"id\":\"cust_09\",\"name\":\"Isabella Garcia\",\"email\":\"isabella.g@email.com\",\"loyaltyTier\":\"gold\",\"loyaltyPoints\":7200,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-009\",\"date\":\"2024-11-12\",\"total\":279.99,\"items\":[\"SKU-HEEL-002\",\"SKU-ACC-001\"]}],\"devicePref\":\"mobile\",\"savedCards\":[{\"last4\":\"2345\",\"brand\":\"Visa\",\"expiry\":\"07/27\"}],\"giftCardBalance\":100.0},{\"id\":\"cust_10\",\"name\":\"Alexander Wright\",\"email\":\"alex.w@email.com\",\"loyaltyTier\":\"platinum\",\"loyaltyPoints\":15600,\"purchaseHistory\":[{\"orderId\":\"ORD-2024-010\",\"date\":\"2024-11-08\",\"total\":899.99,\"items\":[\"SKU-BOOT-003\",\"SKU-SNEAK-003\",\"SKU-BAG-002\"]},{\"orderId\":\"ORD-2024-011\",\"date\":\"2024-09-30\",\"total\":449.99,\"items\":[\"SKU-HEEL-005\"]}],\"devicePref\":\"desktop\",\"savedCards\":[{\"last4\":\"6789\",\"brand\":\"Amex\",\"expiry\":\"02/26\"}],\"giftCardBalance\":200.0}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 45, "column": 3426}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/abhijeetmishra/Developer/Projects/Salesapp/web-app/app/api/mock/loyalty/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport customersData from \"@/mock/customers.json\"\n\nconst tierDiscounts: Record<string, number> = {\n  bronze: 0.05,\n  silver: 0.1,\n  gold: 0.15,\n  platinum: 0.2,\n}\n\nconst activePromotions = [\n  { code: \"WEDDING20\", discount: 0.2, description: \"20% off wedding collection\", validCategories: [\"heels\", \"flats\"] },\n  {\n    code: \"FREESHIP\",\n    discount: 0,\n    description: \"Free shipping on orders over $100\",\n    freeShipping: true,\n    minOrder: 100,\n  },\n  { code: \"LOYALTY2X\", discount: 0, description: \"Double loyalty points this week\", pointsMultiplier: 2 },\n]\n\nexport async function POST(request: Request) {\n  const body = await request.json()\n  const { customerId, cartTotal, cartItems, promoCode, active = true } = body\n\n  await new Promise((resolve) => setTimeout(resolve, 250))\n\n  if (!active) {\n    return NextResponse.json({\n      success: true,\n      data: {\n        loyaltyDiscount: 0,\n        tierDiscount: 0,\n        promoDiscount: 0,\n        finalTotal: cartTotal,\n        message: \"Loyalty rules are currently disabled\",\n      },\n    })\n  }\n\n  const customer = customersData.find((c) => c.id === customerId)\n  if (!customer) {\n    return NextResponse.json({ success: false, error: \"Customer not found\" }, { status: 404 })\n  }\n\n  const tierDiscount = tierDiscounts[customer.loyaltyTier] || 0\n  const tierSavings = cartTotal * tierDiscount\n\n  let promoSavings = 0\n  let appliedPromo = null\n  if (promoCode) {\n    const promo = activePromotions.find((p) => p.code === promoCode.toUpperCase())\n    if (promo) {\n      promoSavings = cartTotal * promo.discount\n      appliedPromo = promo\n    }\n  }\n\n  const totalDiscount = tierSavings + promoSavings\n  const finalTotal = Math.max(0, cartTotal - totalDiscount)\n\n  return NextResponse.json({\n    success: true,\n    data: {\n      customerId,\n      tier: customer.loyaltyTier,\n      currentPoints: customer.loyaltyPoints,\n      giftCardBalance: customer.giftCardBalance,\n      tierDiscount: tierSavings,\n      tierPercentage: tierDiscount * 100,\n      promoDiscount: promoSavings,\n      appliedPromo,\n      availablePromos: activePromotions,\n      totalDiscount,\n      originalTotal: cartTotal,\n      finalTotal,\n      pointsToEarn: Math.floor(finalTotal * 10),\n      timestamp: new Date().toISOString(),\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,gBAAwC;IAC5C,QAAQ;IACR,QAAQ;IACR,MAAM;IACN,UAAU;AACZ;AAEA,MAAM,mBAAmB;IACvB;QAAE,MAAM;QAAa,UAAU;QAAK,aAAa;QAA8B,iBAAiB;YAAC;YAAS;SAAQ;IAAC;IACnH;QACE,MAAM;QACN,UAAU;QACV,aAAa;QACb,cAAc;QACd,UAAU;IACZ;IACA;QAAE,MAAM;QAAa,UAAU;QAAG,aAAa;QAAmC,kBAAkB;IAAE;CACvG;AAEM,eAAe,KAAK,OAAgB;IACzC,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,IAAI,EAAE,GAAG;IAEvE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,IAAI,CAAC,QAAQ;QACX,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,iBAAiB;gBACjB,cAAc;gBACd,eAAe;gBACf,YAAY;gBACZ,SAAS;YACX;QACF;IACF;IAEA,MAAM,WAAW,oGAAa,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACpD,IAAI,CAAC,UAAU;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAC1F;IAEA,MAAM,eAAe,aAAa,CAAC,SAAS,WAAW,CAAC,IAAI;IAC5D,MAAM,cAAc,YAAY;IAEhC,IAAI,eAAe;IACnB,IAAI,eAAe;IACnB,IAAI,WAAW;QACb,MAAM,QAAQ,iBAAiB,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,UAAU,WAAW;QAC3E,IAAI,OAAO;YACT,eAAe,YAAY,MAAM,QAAQ;YACzC,eAAe;QACjB;IACF;IAEA,MAAM,gBAAgB,cAAc;IACpC,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,YAAY;IAE3C,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT,MAAM;YACJ;YACA,MAAM,SAAS,WAAW;YAC1B,eAAe,SAAS,aAAa;YACrC,iBAAiB,SAAS,eAAe;YACzC,cAAc;YACd,gBAAgB,eAAe;YAC/B,eAAe;YACf;YACA,iBAAiB;YACjB;YACA,eAAe;YACf;YACA,cAAc,KAAK,KAAK,CAAC,aAAa;YACtC,WAAW,IAAI,OAAO,WAAW;QACnC;IACF;AACF"}}]
}