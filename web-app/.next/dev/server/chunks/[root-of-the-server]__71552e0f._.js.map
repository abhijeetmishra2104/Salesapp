{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/abhijeetmishra/Developer/Projects/Salesapp/web-app/app/api/mock/recommend/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nconst BACKEND_BASE_URL = process.env.BACKEND_BASE_URL || \"http://localhost:8000\"\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n\n    const {\n      sessionId = body.sessionId || crypto.randomUUID(),\n      customerId,\n      cart,\n      userProfile = {},\n    } = body\n\n    // Call FastAPI Recommendation Agent\n    console.log(\"Fetching recommendations from backend...\")\n    const res = await fetch(`${BACKEND_BASE_URL}/api/recommendations/cart`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        sessionId,\n        customerId,\n        cart,\n        userProfile,\n      }),\n    })\n\n    if (!res.ok) {\n      throw new Error(`Backend error: ${res.status}`)\n    }\n\n    const data = await res.json()\n\n    return NextResponse.json({\n      success: data.status === \"success\",\n      data: {\n        customerId,\n        recommendations: data.recommendations,\n        timestamp: new Date().toISOString(),\n      },\n      errors: data.errors || [],\n    })\n  } catch (error: any) {\n    console.error(\"Recommendation API error:\", error)\n\n    return NextResponse.json(\n      {\n        success: false,\n        data: null,\n        errors: [\n          {\n            code: \"RECOMMENDATION_FAILED\",\n            message: error.message || \"Failed to fetch recommendations\",\n          },\n        ],\n      },\n      { status: 500 },\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,gBAAgB,IAAI;AAElD,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,EACJ,YAAY,KAAK,SAAS,IAAI,OAAO,UAAU,EAAE,EACjD,UAAU,EACV,IAAI,EACJ,cAAc,CAAC,CAAC,EACjB,GAAG;QAEJ,oCAAoC;QACpC,QAAQ,GAAG,CAAC;QACZ,MAAM,MAAM,MAAM,MAAM,GAAG,iBAAiB,yBAAyB,CAAC,EAAE;YACtE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA;gBACA;gBACA;YACF;QACF;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,IAAI,MAAM,EAAE;QAChD;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS,KAAK,MAAM,KAAK;YACzB,MAAM;gBACJ;gBACA,iBAAiB,KAAK,eAAe;gBACrC,WAAW,IAAI,OAAO,WAAW;YACnC;YACA,QAAQ,KAAK,MAAM,IAAI,EAAE;QAC3B;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,6BAA6B;QAE3C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,MAAM;YACN,QAAQ;gBACN;oBACE,MAAM;oBACN,SAAS,MAAM,OAAO,IAAI;gBAC5B;aACD;QACH,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}